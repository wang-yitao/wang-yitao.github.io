<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="google037ab0289b39719b"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Use LaTeX with matplotlib on HPCs | Yitao Wang</title> <meta name="author" content="Yitao Wang"> <meta name="description" content="Manual installation of LaTex patches without administrative privileges"> <meta name="keywords" content="computational materials science, machine learning, scientific computing, mechanics"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/tango.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://wang-yitao.github.io/blog/2023/latex-supported-matplotlib/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9SZJ0H8YBL"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9SZJ0H8YBL");</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Yitao Wang</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">TIL<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Codes</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title"><b>Use LaTeX with matplotlib on HPCs</b></h1> <p class="post-meta">July 10, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a> Â  Â· Â <a href="/blog/tag/latex"> <i class="fas fa-hashtag fa-sm"></i> latex</a> Â <a href="/blog/tag/matplotlib"> <i class="fas fa-hashtag fa-sm"></i> matplotlib</a> Â <a href="/blog/tag/python"> <i class="fas fa-hashtag fa-sm"></i> python</a> Â  Â· Â <a href="/blog/category/hack"> <i class="fas fa-tag fa-sm"></i> hack</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Have you ever wanted to use LaTeX with matplotlib? You are definitely not alone. There are many tutorials out there that can guide you through the installation process. Then we can just follow the <a href="https://matplotlib.org/stable/tutorials/text/usetex.html" rel="external nofollow noopener noopener noreferrer" target="_blank">official documentation</a> to make plots by activating <code class="language-plaintext highlighter-rouge">plt.rcParams['text.usetex'] = True</code>.</p> <p>What we need to do is just installing typical <code class="language-plaintext highlighter-rouge">latex</code> by</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>texlive <span class="c"># for minimum latex build</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>dvipng texlive-latex-extra texlive-fonts-recommended <span class="c"># required by matplotlib</span>
</code></pre></div></div> <p>Then we are good to go! Note that the lightest <code class="language-plaintext highlighter-rouge">texlive</code> installation is not enough, and if you try to use <code class="language-plaintext highlighter-rouge">plt.rcParams['text.usetex'] = True</code> you will find there are packages missing like <code class="language-plaintext highlighter-rouge">type1cm.sty</code>, <code class="language-plaintext highlighter-rouge">dvipng</code>, <em>etc</em>.</p> <p><strong>What if we cannot <code class="language-plaintext highlighter-rouge">sudo</code> on the specific computer?</strong> Then this post is what you are looking for!</p> <h1 id="what-if-i-cant-sudo">What if I canâ€™t sudo!</h1> <p>Things get tricky when we want to install latex on computers where we donâ€™t have administrative privileges (such as HPCs). We cannot use <code class="language-plaintext highlighter-rouge">sudo install latex-*</code> anymore and need to download and install <code class="language-plaintext highlighter-rouge">texlive</code> manually.</p> <ol> <li>Follow the instruction on <a href="https://www.latex-project.org/get/" rel="external nofollow noopener noopener noreferrer" target="_blank">official texlive website</a> to build from scratch <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> wget https://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz <span class="c"># or curl instead of wget</span>
 zcat &lt; install-tl-unx.tar.gz | <span class="nb">tar </span>xf -
 <span class="nb">cd </span>install-tl-<span class="k">*</span>
 perl ./install-tl <span class="nt">--no-interaction</span> <span class="c"># as root or with writable destination</span>
</code></pre></div> </div> </li> <li>Prepend <code class="language-plaintext highlighter-rouge">&lt;installed texlive path&gt;/bin/PLATFORM</code> to your <code class="language-plaintext highlighter-rouge">PATH</code>, <em>e.g.</em>, <code class="language-plaintext highlighter-rouge">~/texlive/YYYY/bin/x86_64-linux</code> </li> <li>Download and extract the missing package to latex library folder (<em>e.g.</em> <code class="language-plaintext highlighter-rouge">&lt;path to texlive&gt;/texmf-dist/tex/latex/type1cm</code>) <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>wget https://mirrors.ctan.org/macros/latex/contrib/type1cm.zip
unzip type1cm.zip
</code></pre></div> </div> </li> <li>Run <code class="language-plaintext highlighter-rouge">latex</code> to generate <code class="language-plaintext highlighter-rouge">.sty</code> file <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> latex type1cm.ins
</code></pre></div> </div> </li> <li>Update and link the file by executing <code class="language-plaintext highlighter-rouge">mktexlsr</code> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> .&lt;path to texlive folder&gt;/texmf-dist/scripts/texlive/mktexlsr
</code></pre></div> </div> </li> </ol> <p>Then voilÃ ! Happy plotting matplotlib supported with latex on any system! Leave a comment or <a href="https://buymeacoffee.com/cyrusyc" rel="external nofollow noopener noopener noreferrer" target="_blank">buy me a coffee</a> if you like this post! ðŸ™‚</p> </div> </article> <div align="center" style="margin-bottom: 1em; margin-top: 1em;"> <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="cyrusyc" data-color="#FFDD00" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#CD7812"></script> </div> <br><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"chiang-yuan/chiang-yuan.github.io","data-repo-id":"MDEwOlJlcG9zaXRvcnk2MDAyNDM2NQ==","data-category":"Comments","data-category-id":"DIC_kwDOA5PmLc4CTBt6","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener noopener noreferrer" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5"> <div class="container"> Â© Copyright 2025 Yitao Wang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener noopener noreferrer">Jekyll</a> &amp; <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener noopener noreferrer" target="_blank">al-folio</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js"></script> <script defer src="/assets/js/common.js"></script> <script defer src="/assets/js/copy_code.js" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,processEnvironments:!0}};</script> <script defer type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9SZJ0H8YBL"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-9SZJ0H8YBL");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>